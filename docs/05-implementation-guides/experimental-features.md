# 実験的機能ガイド

DONATIサイトで実装されている実験的機能の詳細。本体統合はプロジェクト進展に応じて検討。

## Instagram RSS連携（実験実装完了）

### 実装場所
`experiments/instagram-rss-sample/` ディレクトリに完全に動作する実装があります。

### 主要コンポーネント

#### 基本実装
- **ファイル**: `src/lib/instagram-rss.ts`
- **機能**: Instagram の RSS を取得してパース
- **用途**: 基本的なお知らせ抽出

#### 拡張版（エラーハンドリング強化）
- **ファイル**: `src/lib/instagram-rss-enhanced.ts`
- **機能**: エラーハンドリング強化、ログ出力
- **用途**: 本番環境での安定動作

#### キャッシュ付き（パフォーマンス最適化）
- **ファイル**: `src/lib/instagram-rss-cached.ts`
- **機能**: メモリ・ファイルキャッシュ
- **用途**: ビルド時間の短縮

#### 複数ソース対応
- **ファイル**: `src/lib/instagram-multi-source.ts`
- **機能**: 複数アカウント/タグ対応
- **用途**: 複数の情報源からのお知らせ集約

### 統合時の検討事項

1. **RSS.app（無料プラン）でInstagram → RSS変換の導入**
   - 無料プラン: 5フィード、6時間更新
   - Instagram の公式 RSS は廃止されているため、このサービスが必須

2. **画像プロキシはweserv.nl（無料）の活用**
   - XSS対策として Vercel の Image Optimization を検討
   - または、weserv.nl のプロキシ経由で配信

3. **特定ハッシュタグ（#donati_event等）でイベント告知の自動抽出**
   - AI タイトル生成とパターンマッチング
   - 自動でニュースセクション更新

4. **既存のInstagramSectionとの置き換え方針**
   - 現在のInstagramSectionはiframeで埋め込み（manual)
   - RSS連携版はビルド時にデータ取得（自動更新）

### 実装の特徴

#### 自動お知らせ抽出
- AIを使ったタイトル生成
- パターンマッチング（#donati_event等）
- 日付の自動抽出

#### 堅牢なエラー処理
- Result型によるエラーハンドリング
- ネットワークエラー対応
- Retry ロジック

#### 多層キャッシュ
- メモリキャッシュ（高速アクセス）
- ファイルキャッシュ（永続化）
- キャッシュ有効期限管理

#### セキュリティ対策
- レート制限（API呼び出し数管理）
- 画像プロキシ（XSS対策）
- XSS対策フィルター

### 統合前のチェックリスト

統合を検討する際は、以下を確認:

- [ ] RSS.app の無料プランで十分か、または有料プランが必要か
- [ ] Instagram のアカウントが複数ある場合、複数フィード対応が必要か
- [ ] お知らせのカテゴリ分け（イベント、実績、その他）が必要か
- [ ] ビルド時間への影響（毎回Instagram RSSを取得すると時間増加）
- [ ] キャッシュ戦略（ビルド時間 vs 更新頻度のバランス）
- [ ] デザイナーレビュー（レイアウト・スタイル）

## マウスカーソルカスタマイズ（実験実装）

### 実装場所
- **ファイル**: `src/components/CustomCursor.astro`
- **スターテーマ版**: `src/components/CustomCursor-StarTheme.astro`

### 機能
- カスタムカーソル表示（SVG使用）
- ホバーエフェクト
- アニメーション対応

### 統合検討項目

- パフォーマンス影響度確認
- ブラウザ互換性テスト
- モバイルでの動作確認

## 今後の統合予定

### 優先度：高
- Instagram RSS連携の本体統合
- マウスカーソルカスタマイズの本体統合

### 優先度：中
- パフォーマンス最適化（画像遅延読み込み、CSS最適化）
- SEO対策強化

### 優先度：低
- A/Bテスト機能
- アクセス分析の強化

## 実装時の注意

- 実験実装は `experiments/` ディレクトリで管理
- 本体統合時はテスト・ドキュメント整備が必須
- デザイナーレビューを必ず実施
- ビルド時間・パフォーマンスへの影響を測定
