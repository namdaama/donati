---
/**
 * SectionHeadingWithIcon - アイコン付きセクション見出しコンポーネント
 * タイトルテキスト、アイコン、waveLineを組み合わせた見出しを表示
 * professional-experienceページの大セクション見出しで使用
 */
interface Props {
  /**
   * 見出しのタイトルテキスト
   */
  title: string;
  /**
   * アイコン画像のパス（オプション）
   */
  iconPath?: string;
  /**
   * 見出しのレベル (h1-h6)
   * @default 'h2'
   */
  level?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';
  /**
   * タイトルのフォントサイズ
   * @default 'text-4xl' (h1の場合), 'text-2xl' (その他)
   */
  size?: 'text-xl' | 'text-2xl' | 'text-3xl' | 'text-4xl';
  /**
   * waveLine SVGの表示数
   * @default 3
   */
  waveLineCount?: 3 | 5;
  /**
   * タイトルの下マージン
   * @default 'mb-4'
   */
  titleMarginBottom?: string;
  /**
   * セクション全体の下マージン
   * @default 'mb-12'
   */
  marginBottom?: string;
  /**
   * タイトルの左マージン
   * @default ''
   */
  titleMarginLeft?: string;
}

const {
  title,
  iconPath,
  level = 'h2',
  size,
  waveLineCount = 3,
  titleMarginBottom = 'mb-4',
  marginBottom = 'mb-12',
  titleMarginLeft = '',
} = Astro.props;

// デフォルトのサイズを決定
const defaultSize = level === 'h1' ? 'text-4xl' : 'text-2xl';
const titleSize = size || defaultSize;

// waveLineの配列を生成
const waveLines = Array.from({ length: waveLineCount }, (_, i) => i);

// タイトルのクラスを組み立て
const titleClasses = [
  titleSize,
  'font-bold',
  'text-[#58778D]',
  titleMarginLeft,
].filter(Boolean).join(' ');

// HTMLタグを動的に設定
const Tag = level;
---

<div class={marginBottom}>
  <!-- タイトルとアイコン -->
  <div class={`flex items-center ${titleMarginBottom}`}>
    {iconPath && (
      <img
        src={iconPath}
        alt=""
        class="h-6 w-6 mr-3 flex-shrink-0"
      />
    )}
    <Tag class={titleClasses}>{title}</Tag>
  </div>

  <!-- waveline -->
  <div class="mb-6">
    <div class="w-full overflow-hidden flex justify-center">
      {waveLines.map(() => (
        <img src="/images/svg/Parts/waveLine.svg" alt="" class="h-4 w-auto" />
      ))}
    </div>
  </div>
</div>
