---
/**
 * SectionHeading - セクション見出しコンポーネント
 * タイトルテキストとwaveLineを組み合わせた見出しを表示
 * 複数ページで共通して使用可能
 */
interface Props {
  /**
   * 見出しのタイトルテキスト
   */
  title: string;
  /**
   * 見出しのレベル (h1-h6)
   * @default 'h2'
   */
  level?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';
  /**
   * タイトルのフォントサイズ
   * @default 'text-4xl' (h1の場合), 'text-xl md:text-2xl' (その他)
   */
  size?: string;
  /**
   * waveLine SVGの表示数
   * @default 3
   */
  waveLineCount?: 3 | 5;
  /**
   * タイトルの下マージン
   * @default 'mb-4'
   */
  titleMarginBottom?: string;
  /**
   * セクション全体の下マージン
   * @default 'mb-12'
   */
  marginBottom?: string;
  /**
   * タイトルの左マージン（contact.astroでml-4が使用されている）
   * @default ''
   */
  titleMarginLeft?: string;
}

const {
  title,
  level = 'h2',
  size,
  waveLineCount = 3,
  titleMarginBottom = 'mb-4',
  marginBottom = 'mb-12',
  titleMarginLeft = '',
} = Astro.props;

// デフォルトのサイズを決定（レスポンシブ対応: モバイル 20px / PC 24px）
const defaultSize = level === 'h1' ? 'text-4xl' : 'text-xl md:text-2xl';
const titleSize = size || defaultSize;

// waveLineの配列を生成
const waveLines = Array.from({ length: waveLineCount }, (_, i) => i);

// タイトルのクラスを組み立て
const titleClasses = [
  titleSize,
  'font-bold',
  'text-[#58778D]',
  titleMarginBottom,
  titleMarginLeft,
].filter(Boolean).join(' ');

// HTMLタグを動的に設定
const Tag = level;
---

<div class={marginBottom}>
  <Tag class={titleClasses}>{title}</Tag>

  <!-- waveline -->
  <div class="mb-4 md:mb-6">
    <div class="w-full overflow-hidden flex justify-center">
      {waveLines.map(() => (
        <img src="/images/svg/decorations/waveline/waveLine.svg" alt="" class="h-4 w-auto" />
      ))}
    </div>
  </div>
</div>
