---
export interface SocialLink {
  type: 'instagram' | 'youtube' | 'website' | 'community';
  url: string;
  label: string;
}

export interface Props {
  name: string;
  realName?: string;
  title?: string;
  nameSvg: string;
  pictSvg: string;
  overview: string;
  achievements: string[];
  publications?: string[];
  showButtons?: boolean;
  professionalExperienceLink?: string;
  servicesLink?: string;
  socialLinks?: SocialLink[];
}

const {
  name,
  realName,
  nameSvg,
  pictSvg,
  overview,
  achievements,
  publications,
  showButtons = true,
  professionalExperienceLink,
  servicesLink,
  socialLinks
} = Astro.props;

// Font Awesomeアイコンクラス取得関数
const getIconClass = (type: string): string => {
  const iconMap: Record<string, string> = {
    instagram: 'fa-brands fa-instagram',
    youtube: 'fa-brands fa-youtube',
    website: 'fa-solid fa-globe',
    community: 'fa-solid fa-users'
  };
  return iconMap[type] || 'fa-solid fa-link';
};

// SNSカラー取得関数
const getIconColor = (type: string): string => {
  const colorMap: Record<string, string> = {
    instagram: '#E4405F', // Instagram公式カラー
    youtube: '#FF0000',   // YouTube公式カラー
    website: '#58778D',   // サイトテーマカラー（紺青）
    community: '#F5C842'  // マイルドな黄色
  };
  return colorMap[type] || '#58778D';
};
---

<div class="bg-transparent flex flex-col h-full p-4">
  <!-- キャラクター + 名前（横並び、1:2バランス） -->
  <div class="flex items-center gap-2 mb-2">
    <!-- キャラクターイラスト（1/3幅） -->
    <div class="w-1/3 flex-shrink-0 flex justify-center items-center h-48">
      <img
        src={pictSvg}
        alt={name}
        class="object-contain"
        style={name === 'ひでゆき' ? "width: 104px; height: 190px;" : "width: 132px; height: 200px;"}
      />
    </div>

    <!-- 名前SVG（2/3幅） -->
    <div class="w-2/3 flex items-center justify-center">
      <img
        src={nameSvg}
        alt={name}
        class="w-auto"
        style="width: 290px; height: 152px;"
      />
    </div>
  </div>

  <!-- 概要 -->
  <div class="mb-6 min-h-[420px]">
    {realName && (
      <h3 class="text-2xl font-bold mb-4" style="color: #58778D;">{realName}</h3>
    )}
    <p class="leading-relaxed text-sm text-gray-600" style="white-space: pre-line;">
      {overview}
    </p>
  </div>

  <!-- 主な実績 -->
  <div class="mb-6">
    <h4 class="text-sm font-bold mb-2" style="color: #58778D;">主な実績</h4>
    <ul class="space-y-1">
      {achievements.map((achievement) => (
        <li class="flex items-start">
          <span class="text-overview-yellow mr-2 text-xs mt-0.5">●</span>
          <span class="text-gray-600 text-xs leading-relaxed">{achievement}</span>
        </li>
      ))}
    </ul>
  </div>

  <!-- 出版・制作物 -->
  {publications && publications.length > 0 && (
    <div class="mb-6">
      <h4 class="text-sm font-bold mb-2" style="color: #58778D;">出版・制作物</h4>
      <ul class="space-y-1">
        {publications.map((item) => (
          <li class="flex items-start">
            <span class="text-overview-yellow mr-2 text-xs mt-0.5">●</span>
            <span class="text-gray-600 text-xs leading-relaxed">{item}</span>
          </li>
        ))}
      </ul>
    </div>
  )}

  <!-- ボタン2つ（横並び、どちらもライトブルー） -->
  {showButtons && (
    <div class="flex gap-3 mt-auto">
      <!-- 詳しい活動履歴ボタン -->
      <a
        href={professionalExperienceLink}
        class="flex-1 bg-overview-sky hover:bg-overview-sky/80 text-white font-bold py-2 px-3 rounded-lg
               transition-all duration-300 text-center text-sm shadow-md"
      >
        詳しい活動履歴
      </a>

      <!-- サービス内容ボタン -->
      <a
        href={servicesLink}
        class="flex-1 bg-overview-sky hover:bg-overview-sky/80 text-white font-bold py-2 px-3 rounded-lg
               transition-all duration-300 text-center text-sm shadow-md"
      >
        サービス内容
      </a>
    </div>
  )}

  <!-- SNSリンク -->
  {socialLinks && socialLinks.length > 0 && (
    <div class="flex gap-4 mt-auto pt-4 pl-4 border-t border-gray-200">
      {socialLinks.map((link) => (
        <a
          href={link.url}
          target="_blank"
          rel="noopener noreferrer"
          aria-label={link.label}
          class="hover:opacity-80 transition-opacity duration-300"
        >
          <i
            class={`${getIconClass(link.type)} text-3xl md:text-4xl`}
            style={`color: ${getIconColor(link.type)};`}
          ></i>
        </a>
      ))}
    </div>
  )}
</div>
